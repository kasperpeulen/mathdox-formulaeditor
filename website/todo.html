<html>

  <head>

    <title>MathDox formula editor</title>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <script type='text/javascript' src='org/mathdox/formulaeditor/main.js'>
    </script>

    <style type='text/css'>

      #main {
        background-color:#FFF;
        width:50em;
        font-family:sans-serif;
      }

      .code {
        padding-left:2em;
        font-family:monospace;
      }

    </style>

  </head>

  <body>

    <div id='main'>

      <h3>MathDox formula editor</h3>

      <h4>Demo</h4>

      <textarea id='formula2' class='mathdoxformula mathdoxpalette' style='margin-right: 2em'>

        &lt;OMOBJ version='2.0' xmlns='http://www.openmath.org/OpenMath'>
          &lt;OMA>
            &lt;OMS cd='linalg2' name='matrix'/>
            &lt;OMA>
              &lt;OMS cd='linalg2' name='matrixrow'/>
                &lt;OMI>1&lt;/OMI>
            &lt;/OMA>
          &lt;/OMA>
        &lt;/OMOBJ>

      </textarea>

      <textarea id='formula1' class='mathdoxformula mathdoxpalette'>

        &lt;OMOBJ>
          &lt;OMA>
            &lt;OMS cd='linalg2' name='matrix'/>
            &lt;OMA>
              &lt;OMS cd='linalg2' name='matrixrow'/>
              &lt;OMI>1&lt;/OMI>
              &lt;OMI>2&lt;/OMI>
            &lt;/OMA>
            &lt;OMA>
              &lt;OMS cd='linalg2' name='matrixrow'/>
              &lt;OMI>3&lt;/OMI>
              &lt;OMI>4&lt;/OMI>
            &lt;/OMA>
          &lt;/OMA>
        &lt;/OMOBJ>

      </textarea>

      <h2>really short term todo list</h2>
      <ul>
        <li>nothing at the moment, see short term todo list</li>
      </ul>
      <h2>short term todo list</h2>
      <ul>
	<li>continual error indication (something red)</li>
	<li>multiple objects in one formulaeditor using enter/newlines (as a list ?)</li>
        <li>use classnames for formulaeditor html elements: mathdoxeditor
        mathdoxtextarea mathdoxinput, ...</li>
        <li>extra symbols: arith1.root: baselining (nicer display) </li>
        <li>speed up: redrawing</li>
        <li>speed up: cursor movement/inserting/deleting</li>
        <li>key repetition (key stays pressed, count as multiple inputs?, does not seem to be a problem under windows)</li>
        <li>speed up: code cleanup : move method to cache symbols/drawImage to
        a function</li>
        <li>scalability: ctrl+, ctrl-</li>
        <li>palette: make palette floating with css</li>
        <li>palette: toggle button</li>
        <li>palette: clean up palette code and add more documentation</li>
        <li>palette: customizable with openmath input</li>
      </ul>
      <h2>mid term todo list</h2>
      <ul>
	<li>show formulaeditor contents when printing</li>
	<li>moving fe around (hans has an url ?)</li>
        <li>use variable size brackets for abs and list</li>
        <li>getOpenMath/getMathML button</li>
        <li>list of all supported symbols</li>
        <li>slanted letters for variables</li>
        <li>fix vertical navigation with 1/2 inside a matrix</li>
        <li>palette: parse symbols from xml</li>
        <li>some symbols in blue: keywords/parentheses</li>
        <li>implement growing/shrinking matrices</li>
        <li>reload button</li>
        <li>add != (neq) symbol</li>
	<li>3x</li>
	<li>idea: backspace inside a fraction or a sqrt: quick delete</li>
	<li>adding units (like keywords):harder because of prefixes and m/s (which is one symbol)</li>
      </ul>

      <h2>items done</h2>
      <ul>
        <li>scalability: did enough of cmsy10 and &lt; &gt; pi</li>
        <li>palette: make showing palette optional</li>
	<li>now loading only a small number of files</li>
	<li>automatic versioning from build.xml</li>
        <li>no longer slow with multiple fields, see wortel: books/differentieren/exams/nl/exam1.xml</li>
        <li>fix race condition in main.js (only start loading after main.js)</li>
        <li>document.body.attachEvent race condition fixed (now setting a timeout if document.body does not exist yet)</li>
        <li>ORBEON field update only on blur</li>
	<li>sensible margin for palette/input canvas on mathdoxplayer</li>
	<li>allow toggling palette on/of from mathdoxplayer</li>
        <li>toggling palette on/off (per textarea)</li>
        <li>MS IE: fixed problem with ORBEON forms updating </li>
        <li>sqrt(x,2) when added from palette: problem with filling blue field, problem with clicking with sqrt(x,2)</li>
        <li>extra symbols: list1.list (using curly brackets)</li>
        <li>extra symbols: arith1.root: clicking and the right cursor
          position</li>
        <li>extra symbols: arith1.root: number above root</li>
        <li>extra symbols: arith1.root: sqrt special case</li>
        <li>extra symbols: arith1.root: convert to semantics</li>
        <li>extra symbols: arith1.root: convert to openmath</li>
        <li>add root(a,b) for bVa) NOTE: not root(a,b) but rt(a,b)</li>
        <li>relations work again (was missing $require in FormulaEditor.js)</li>
        <li>MS Internet Explorer support (first step)</li>
        <li>fixed problems with inserting the wrong item from the palette (this was caused by problems with a PArray inside another PArray and ``reuse'' of colInfo and rowInfo</li>
        <li>fixed problems with redrawing brackets (at least 3 heigh, custom length) </li>
        <li>create a more suitable test website with todo list</li>
        <li>palette: display vectors and matrices with (small) blocks</li>
        <li>scalability</li>
        <li>vector positioning like matrix</li>
        <li>F5 do not reload with error</li>
        <li>fix a index bug with inserting 2 symbols in an emptyrow (<b>done</b>)</li>
        <li>check which other symbols to add(<b>done</b>)</li>
        <li>palette: add symbols from mathadore : 2x2 matrix, 2x3 matrix 2 vector, 3 vector, sin(.) (<b>done</b></li>
        <li>ignore spaces (<b>done</b>)</li>
        <li>growing brackets (<b>done</b>)</li>
        <li>palette: add palette to page (<b>done</b>)</li>
        <li>palette: add some basic symbols to palette (<b>done</b>)</li>
        <li>reload with F5 (<b>done</b>)</li>
        <li>More space around multiplication-cdot, '-' (<b>done</b>)</li>
        <li>palette: add symbol on 'current' position (<b>done</b>)</li>
      </ul>

      <p>
        To see an OpenMath representation of the first formula above
        <a href='javascript:alert(document.getElementById("formula1").value)'>
        click here</a>. This demonstrates that a semantic tree of the formula
        is stored, and not just a presentation tree. To see a MathML
        representation of the first formula above 
        <a href='javascript:alert(org.mathdox.formulaeditor.FormulaEditor.getEditorByTextArea("formula1").presentation.getSemantics().rule)'>semantics rule</a>.
        <a href='javascript:alert(org.mathdox.formulaeditor.FormulaEditor.getEditorByTextArea("formula1").presentation.getSemantics().index)'>semantics index</a>.
        <a href='javascript:alert(org.mathdox.formulaeditor.FormulaEditor.getEditorByTextArea("formula1").presentation.getSemantics().value)'>semantics value</a>.
        <a href='javascript:alert(org.mathdox.formulaeditor.FormulaEditor.getEditorByTextArea("formula1").presentation.getSemantics().value[0])'>semantics value[0]</a>.
        <a href='javascript:alert(org.mathdox.formulaeditor.FormulaEditor.getEditorByTextArea("formula1").presentation.getSemantics().value.getOpenMath())'>openmath</a>.
        <a href='javascript:alert(org.mathdox.formulaeditor.FormulaEditor.getEditorByTextArea("formula1").presentation instanceof org.mathdox.formulaeditor.presentation.Row)'>is row</a>.
        <a href='javascript:alert(org.mathdox.formulaeditor.FormulaEditor.getEditorByTextArea("formula1").presentation instanceof org.mathdox.formulaeditor.presentation.Matrix)'>is matrix</a>.
        <a href='javascript:alert(org.mathdox.formulaeditor.FormulaEditor.getEditorByTextArea("formula1").presentation.children'>children</a>.
        <a href='javascript:alert(org.mathdox.formulaeditor.FormulaEditor.getEditorByTextArea("formula1").presentation.children.length'>children length</a>.
        <a href='javascript:alert(org.mathdox.formulaeditor.FormulaEditor.getEditorByTextArea("formula1").presentation.children[0] instanceof org.mathdox.formulaeditor.presentation.Row)'>child is row</a>.
        <a href='javascript:alert(org.mathdox.formulaeditor.FormulaEditor.getEditorByTextArea("formula1").presentation.children[0] instanceof org.mathdox.formulaeditor.presentation.Matrix)'>child is matrix</a>.
        <a href='javascript:alert(new org.mathdox.formulaeditor.presentation.Column(Symbol("1"),Symbol("2")))'>example matrix</a>.
        <a href='javascript:alert(new org.mathdox.formulaeditor.presentation.Column(Symbol("1"),Symbol("2")).getSemantics())'>example matrix</a>.
      </p>

    </div>

  </body>

</html>
